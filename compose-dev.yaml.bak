services:
    web:
        build:  .
        environment:
            - BYPASS_AUTHORIZATION=true
            - REDIS_HOST=redis
            - ENABLED_MODULES=streaming_whisper
            - WHISPER_MODEL_NAME=large
            - WHISPER_MODEL_PATH=/models/streaming-whisper
            # VAD (Voice Activity Detection) Ayarları
            - VAD_THRESHOLD=0.5
            - VAD_MIN_SPEECH_DURATION=0.1
            - VAD_MIN_SILENCE_DURATION=0.5
            - VAD_SPEECH_PAD=0.1
            # Whisper Buffer Ayarları
            - WHISPER_FLUSH_BUFFER_INTERVAL=2000
        platform: linux/amd64
        ports:
            - "8000:8000"
            - "8001:8001"
        volumes:
            - ./models/streaming-whisper:/models/streaming-whisper
    redis:
        image: "redis:alpine"
        platform: linux/amd64
